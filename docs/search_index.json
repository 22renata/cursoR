[
["index.html", "Curso de R para Meteorologia IAG/USP Capitulo 1 Pre-requisitos do sistema 1.1 Pacotes usados neste curso 1.2 Colaborar 1.3 Aportar com dados", " Curso de R para Meteorologia IAG/USP Sergio Ibarra-Espinosa, Amanda Rehbein, Daniel Schuch, Camila Lopes, e possivelmente outros (u r invited to collaborate) 2018-05-17 Capitulo 1 Pre-requisitos do sistema Em Windows, instale além do R, Rtools https://cran.r-project.org/bin/windows/Rtools/ Em MAC instale netcdf e: brew unlink gdal brew tap osgeo/osgeo4mac &amp;&amp; brew tap --repair brew install proj brew install geos brew install udunits brew install gdal2 --with-armadillo --with-complete --with-libkml --with-unsupported brew link --force gdal2 Em Ubuntu: - sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable --yes - sudo apt-get --yes --force-yes update -qq # install tmap dependencies - sudo apt-get install --yes libprotobuf-dev protobuf-compiler libv8-3.14-dev # install tmap dependencies; for 16.04 libjq-dev this ppa is needed: - sudo add-apt-repository -y ppa:opencpu/jq - sudo apt-get --yes --force-yes update -qq - sudo apt-get install libjq-dev # units/udunits2 dependency: - sudo apt-get install --yes libudunits2-dev # sf dependencies: - sudo apt-get install --yes libproj-dev libgeos-dev libgdal-dev libnetcdf-dev netcdf-bin gdal-bin 1.1 Pacotes usados neste curso Para fazer este curso instale os seguintes pacotes como indicado: install.packages(&quot;devtools&quot;) devtools::install_github(&quot;tidyverse/tidyverse&quot;) devtools::install_github(&quot;r-spatial/sf&quot;) devtools::install_github(&quot;r-spatial/mapview&quot;) devtools::install_github(&quot;r-spatial/stars&quot;) install.packages(c(&quot;raster&quot;, &quot;sp&quot;, &quot;rgdal&quot;, &quot;maptools&quot;, &quot;ncdf4&quot;)) install.packages(c(&quot;cptcity&quot;, &quot;data.table&quot;, &quot;openair&quot;)) devtools é um pacote para instalar pacotes de diferentes repositórios tidyverse é o universo de pacotes do Hadley Wickham. A instalação tem que ser usando devtools, pois precisamos plotar os objetos espacias sf usando geom_sf. sf e mapview, stars, raster, sp, rgdal e maptools são para a parte espacial. Lembrar que os objetos em meteorologias são espaço-temporais. ncdf4 é um pacote para manipular arquivos NetCDF. cptcity é um pacote que tem 7140 paletas de cores do arquivo web cpt-city (http://soliton.vm.bytemark.co.uk/pub/cpt-city/index.html). openair é um pacote para trabalhar com dados de qualidade do ar e meteorologia. Se faltarem dependencias de sistema, instale elas e instale os pacotes. 1.2 Colaborar A forma preferida de colaboração é com pull-requests em https://github.com/ibarraespinosa/cursoR/pull/new/master. Lembre de aplicar a Guia de Estilo de R de Google (https://google.github.io/styleguide/Rguide.xml) ou com o formato de formatR https://yihui.name/formatr/. Em poucas palavras, lembre que seu código vai ser lido por seres humanos. Se quiser tem acesso no repositório deste curso, me contate. Tem um botão para editar qualquer página. 1.3 Aportar com dados Se você tem dados para fazer este curso mais legal, por favor, edite este aquivo e com pull request, eu vou fazer um merge para poder. NCEP: ftp://nomads.ncdc.noaa.gov/GFS/analysis_only/ "],
["intro.html", "Capitulo 2 Intro 2.1 IMPORTANTE", " Capitulo 2 Intro Este curso é para pos, então vamos ver conteúdo rapidamente e se não da tempo, este curso esta online no sitio https://github.com/atmoschem/cursorIAG. Eu tento usar BASE sempre que posso, e se não da ai vou para outros paradigmas. Outros pacotes de BASE: utils, stats, datasets, graphics, grDevices, grid, methods, tools, parallel, compiler, splines, tcltk , stats4. Veja outros pacotes. Este curso esta baseado no livro R Programming for Data Science. Vamos usar Rstudio Dica: Se não sabe como usar uma função, escreva: ?função. As funções tem argumentos, use TAB para ver eles numa função. 2.1 IMPORTANTE teu novo melhor amigo, besti friendi, BFF, parceiro, mano, tabarish, komrade, compaheiro, colega, buisiness partner amd whatever meanningful is TAB no RSTUDIO. Esta combinação é tão boa, como o cafe com leite, pizza e abacaxi, vitamina de acabate com amendoim Manaus, a melhor combinação. Porque quando se tu não lembra os argumentos da função, e não quer ver o help ? de cada função, so clica TAB e RSTUDIO te mostrara a lista de argumentos. Vamos lá! "],
["r.html", "Capitulo 3 R! 3.1 Objetos de R 3.2 Classe 3.3 Vetores 3.4 Convertir objetos com as 3.5 Matrices e a função matrix 3.6 Array 3.7 list 3.8 Tempo e Data 3.9 Fatores 3.10 data.frames", " Capitulo 3 R! Quase em qualquer sistema operacional mas eu vou focar em Linux. Muita documentação: Intro. I/O. Quer fazer um pacote? Veja, aqui e aqui. Stackoverflow provides a great source of resources. 3.1 Objetos de R Character a numeric 1 integer 1 complex 0+1i logical TRUE 3.2 Classe class função permite ver a classe dos objetos 3.3 Vetores c(“A”, “C”, “D”) 1:5 = c(1, 2, 3, 4, 5) c(TRUE, FALSE) c(1i, -1i) c(1, “C”, “D”) qual é a classe??? c(1, NA, “D”) qual é a classe??? c(1, NA, NaN) qual é a classe??? 3.4 Convertir objetos com as as.numeric(c(1, &quot;C&quot;, &quot;D&quot;)) ## Warning: NAs introduzidos por coerção ## [1] 1 NA NA 3.5 Matrices e a função matrix [linhas, colunas] permitidos elementos da mesma clase! vamos ver os argumentos da função matrix args(matrix) ## function (data = NA, nrow = 1, ncol = 1, byrow = FALSE, dimnames = NULL) ## NULL usando TAB (m &lt;- matrix(data = 0, nrow = 4, ncol = 4)) ## [,1] [,2] [,3] [,4] ## [1,] 0 0 0 0 ## [2,] 0 0 0 0 ## [3,] 0 0 0 0 ## [4,] 0 0 0 0 (m1 &lt;- matrix(data = 1:(4*4), nrow = 4, ncol = 4)) ## [,1] [,2] [,3] [,4] ## [1,] 1 5 9 13 ## [2,] 2 6 10 14 ## [3,] 3 7 11 15 ## [4,] 4 8 12 16 dim(m1) ## [1] 4 4 (m2 &lt;- matrix(data = 1:(4*4), nrow = 4, ncol = 4, byrow = TRUE)) ## [,1] [,2] [,3] [,4] ## [1,] 1 2 3 4 ## [2,] 5 6 7 8 ## [3,] 9 10 11 12 ## [4,] 13 14 15 16 3.6 Array É como uma matriz de matrizes de matrizes de matrizes…… and so on. args(array) ## function (data = NA, dim = length(data), dimnames = NULL) ## NULL lembre usar TAB (a &lt;- array(data = 0, dim = c(1,1))) ## [,1] ## [1,] 0 class(a) ## [1] &quot;matrix&quot; (a &lt;- array(data = 0, dim = c(1,1,1))) ## , , 1 ## ## [,1] ## [1,] 0 class(a) ## [1] &quot;array&quot; (a &lt;- array(data = 0, dim = c(2,2,2))) ## , , 1 ## ## [,1] [,2] ## [1,] 0 0 ## [2,] 0 0 ## ## , , 2 ## ## [,1] [,2] ## [1,] 0 0 ## [2,] 0 0 (a &lt;- array(data = 0, dim = c(2,4,4))) ## , , 1 ## ## [,1] [,2] [,3] [,4] ## [1,] 0 0 0 0 ## [2,] 0 0 0 0 ## ## , , 2 ## ## [,1] [,2] [,3] [,4] ## [1,] 0 0 0 0 ## [2,] 0 0 0 0 ## ## , , 3 ## ## [,1] [,2] [,3] [,4] ## [1,] 0 0 0 0 ## [2,] 0 0 0 0 ## ## , , 4 ## ## [,1] [,2] [,3] [,4] ## [1,] 0 0 0 0 ## [2,] 0 0 0 0 dim(a) ## [1] 2 4 4 (a &lt;- array(data = 0, dim = c(2, 2,2,2))) 3.7 list As listas são como sacolas, e dentro delas, tu pode colocar mais sacolas… então, tu pode ter sacolas, dentro de sacolas, dentro de sacolas… ou list(list(list(list(1)))) ## [[1]] ## [[1]][[1]] ## [[1]][[1]][[1]] ## [[1]][[1]][[1]][[1]] ## [1] 1 a diferença das matrices, tu pode colocar cualquer coisa nas listas, por exemplo: funções, characters, etc. (x &lt;- list(1, &quot;a&quot;, TRUE, 1 + 4i)) ## [[1]] ## [1] 1 ## ## [[2]] ## [1] &quot;a&quot; ## ## [[3]] ## [1] TRUE ## ## [[4]] ## [1] 1+4i 3.8 Tempo e Data R tem classes de tempo e data: (a &lt;- ISOdate(year = 2018, month = 4, day = 5)) ## [1] &quot;2018-04-05 12:00:00 GMT&quot; class(a) ## [1] &quot;POSIXct&quot; &quot;POSIXt&quot; (b &lt;- ISOdate(year = 2018, month = 4, day = 5, tz = &quot;Americas/Sao_Paulo&quot;)) ## [1] &quot;2018-04-05 12:00:00 Americas&quot; tempo (d &lt;- ISOdatetime(year = 2018, month = 4, day = 5, hour = 0, min = 0, sec = 0, tz = &quot;Americas/Sao_Paulo&quot;)) ## [1] &quot;2018-04-05 Americas&quot; O pacote nanotime permite trabalhar com nano segundos. Da pra fazer secuencias: hoje &lt;- Sys.time() (a &lt;- seq.POSIXt(from = hoje, by = 3600, length.out = 24)) ## [1] &quot;2018-05-17 19:14:35 -03&quot; &quot;2018-05-17 20:14:35 -03&quot; ## [3] &quot;2018-05-17 21:14:35 -03&quot; &quot;2018-05-17 22:14:35 -03&quot; ## [5] &quot;2018-05-17 23:14:35 -03&quot; &quot;2018-05-18 00:14:35 -03&quot; ## [7] &quot;2018-05-18 01:14:35 -03&quot; &quot;2018-05-18 02:14:35 -03&quot; ## [9] &quot;2018-05-18 03:14:35 -03&quot; &quot;2018-05-18 04:14:35 -03&quot; ## [11] &quot;2018-05-18 05:14:35 -03&quot; &quot;2018-05-18 06:14:35 -03&quot; ## [13] &quot;2018-05-18 07:14:35 -03&quot; &quot;2018-05-18 08:14:35 -03&quot; ## [15] &quot;2018-05-18 09:14:35 -03&quot; &quot;2018-05-18 10:14:35 -03&quot; ## [17] &quot;2018-05-18 11:14:35 -03&quot; &quot;2018-05-18 12:14:35 -03&quot; ## [19] &quot;2018-05-18 13:14:35 -03&quot; &quot;2018-05-18 14:14:35 -03&quot; ## [21] &quot;2018-05-18 15:14:35 -03&quot; &quot;2018-05-18 16:14:35 -03&quot; ## [23] &quot;2018-05-18 17:14:35 -03&quot; &quot;2018-05-18 18:14:35 -03&quot; funções bacana: weekdays, month, julian weekdays(a) ## [1] &quot;Thursday&quot; &quot;Thursday&quot; &quot;Thursday&quot; &quot;Thursday&quot; &quot;Thursday&quot; &quot;Friday&quot; ## [7] &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; ## [13] &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; ## [19] &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; &quot;Friday&quot; months(a) ## [1] &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; ## [12] &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; &quot;May&quot; ## [23] &quot;May&quot; &quot;May&quot; julian(a) #olha ?julian... dias desde origin ## Time differences in days ## [1] 17668.93 17668.97 17669.01 17669.05 17669.09 17669.14 17669.18 ## [8] 17669.22 17669.26 17669.30 17669.34 17669.39 17669.43 17669.47 ## [15] 17669.51 17669.55 17669.59 17669.64 17669.68 17669.72 17669.76 ## [22] 17669.80 17669.84 17669.89 ## attr(,&quot;origin&quot;) ## [1] &quot;1970-01-01 GMT&quot; olha https://en.wikipedia.org/wiki/Julian_day: 3.9 Fatores Os factors podem ser um pouco infernais. Olha R INFERNO Usados para representar categorias, ejemplo clasico para nos, dias da semana. a &lt;- seq.POSIXt(from = hoje, by = 3600, length.out = 24*7) aa &lt;- weekdays(a) class(aa) ## [1] &quot;character&quot; factor(aa) ## [1] Thursday Thursday Thursday Thursday Thursday Friday Friday ## [8] Friday Friday Friday Friday Friday Friday Friday ## [15] Friday Friday Friday Friday Friday Friday Friday ## [22] Friday Friday Friday Friday Friday Friday Friday ## [29] Friday Saturday Saturday Saturday Saturday Saturday Saturday ## [36] Saturday Saturday Saturday Saturday Saturday Saturday Saturday ## [43] Saturday Saturday Saturday Saturday Saturday Saturday Saturday ## [50] Saturday Saturday Saturday Saturday Sunday Sunday Sunday ## [57] Sunday Sunday Sunday Sunday Sunday Sunday Sunday ## [64] Sunday Sunday Sunday Sunday Sunday Sunday Sunday ## [71] Sunday Sunday Sunday Sunday Sunday Sunday Sunday ## [78] Monday Monday Monday Monday Monday Monday Monday ## [85] Monday Monday Monday Monday Monday Monday Monday ## [92] Monday Monday Monday Monday Monday Monday Monday ## [99] Monday Monday Monday Tuesday Tuesday Tuesday Tuesday ## [106] Tuesday Tuesday Tuesday Tuesday Tuesday Tuesday Tuesday ## [113] Tuesday Tuesday Tuesday Tuesday Tuesday Tuesday Tuesday ## [120] Tuesday Tuesday Tuesday Tuesday Tuesday Tuesday Wednesday ## [127] Wednesday Wednesday Wednesday Wednesday Wednesday Wednesday Wednesday ## [134] Wednesday Wednesday Wednesday Wednesday Wednesday Wednesday Wednesday ## [141] Wednesday Wednesday Wednesday Wednesday Wednesday Wednesday Wednesday ## [148] Wednesday Wednesday Thursday Thursday Thursday Thursday Thursday ## [155] Thursday Thursday Thursday Thursday Thursday Thursday Thursday ## [162] Thursday Thursday Thursday Thursday Thursday Thursday Thursday ## Levels: Friday Monday Saturday Sunday Thursday Tuesday Wednesday olha os Levels Então: ab &lt;- factor(x = aa, levels = c(&quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;)) levels(ab) ## [1] &quot;Monday&quot; &quot;Tuesday&quot; &quot;Wednesday&quot; &quot;Thursday&quot; &quot;Friday&quot; &quot;Saturday&quot; ## [7] &quot;Sunday&quot; 3.10 data.frames lembre ?data.frame São como planilha EXCEL…. mais o menos É uma classe bem especial, tem elementos de matriz mas o modo é lista (df &lt;- data.frame(a = 1:3)) ## a ## 1 1 ## 2 2 ## 3 3 names(df) ## [1] &quot;a&quot; class(df) ## [1] &quot;data.frame&quot; mode(df) ## [1] &quot;list&quot; Então nrow(df) ## [1] 3 ncol(df) ## [1] 1 dim(df) ## [1] 3 1 "],
["importando-e-exportando-dados-em-r.html", "Capitulo 4 Importando e exportando dados em R 4.1 data-frames 4.2 Exportando texto com write.table 4.3 Exportando objetos com save 4.4 Exportando objetos com saveRDS 4.5 Processando nossa data-frame 4.6 aggregate 4.7 subset 4.8 data.table, read_xl e mais 4.9 NetCDF", " Capitulo 4 Importando e exportando dados em R 4.1 data-frames Probabelmente um dos promeiros objetos que vamos usar quando começamos usar R. Pensa num data-frame como uma planilha de Libreoffice (o excel). Os data-frame pode ser criaos como foi visto na seção anterior. O principal, é que temos varias funções para ler data-frames no R, entre elas read.csv read.csv2 read.table Agora vamos a ler dados do repositorio usando read.table, mas primeiro vamos lembrar que se tu precisar ver a ajuda da função, tem que escrever no R ?read.table. Então, agora vamos ver os argumentos da função: args(read.table) ## function (file, header = FALSE, sep = &quot;&quot;, quote = &quot;\\&quot;&#39;&quot;, dec = &quot;.&quot;, ## numerals = c(&quot;allow.loss&quot;, &quot;warn.loss&quot;, &quot;no.loss&quot;), row.names, ## col.names, as.is = !stringsAsFactors, na.strings = &quot;NA&quot;, ## colClasses = NA, nrows = -1, skip = 0, check.names = TRUE, ## fill = !blank.lines.skip, strip.white = FALSE, blank.lines.skip = TRUE, ## comment.char = &quot;#&quot;, allowEscapes = FALSE, flush = FALSE, ## stringsAsFactors = default.stringsAsFactors(), fileEncoding = &quot;&quot;, ## encoding = &quot;unknown&quot;, text, skipNul = FALSE) ## NULL Aqui vem-se os valores default dos argumentos da função read.table. O terceiro argumento é sep, com valores por default = “”. df &lt;- read.table(&quot;https://raw.githubusercontent.com/ibarraespinosa/cursoR/master/dados/NOXIPEN2014.txt&quot;) Agora vamos usar a funções head and tail para ver as primeiras e as ultimas 6 linhas do data-frame. head(df) ## TipodeRede TipodeMonitoramento Tipo Data Hora ## 2 Automático CETESB Dados Primários 01/01/2014 01:00 ## 3 Automático CETESB Dados Primários 01/01/2014 02:00 ## 4 Automático CETESB Dados Primários 01/01/2014 03:00 ## 5 Automático CETESB Dados Primários 01/01/2014 04:00 ## 6 Automático CETESB Dados Primários 01/01/2014 05:00 ## 7 Automático CETESB Dados Primários 01/01/2014 06:00 ## CodigoEstação NomeEstação NomeParâmetro ## 2 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 3 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 4 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 5 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 6 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 7 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## UnidadedeMedida MediaHoraria MediaMovel Valido ## 2 ppb 9 - Não ## 3 ppb 9 - Sim ## 4 ppb 5 - Sim ## 5 ppb 4 - Sim ## 6 ppb 5 - Sim ## 7 ppb 5 - Sim tail(df) ## TipodeRede TipodeMonitoramento Tipo Data Hora ## 8577 Automático CETESB Dados Primários 01/01/2015 19:00 ## 8578 Automático CETESB Dados Primários 01/01/2015 20:00 ## 8579 Automático CETESB Dados Primários 01/01/2015 21:00 ## 8580 Automático CETESB Dados Primários 01/01/2015 22:00 ## 8581 Automático CETESB Dados Primários 01/01/2015 23:00 ## 8582 Automático CETESB Dados Primários 01/01/2015 24:00 ## CodigoEstação NomeEstação NomeParâmetro ## 8577 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8578 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8579 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8580 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8581 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8582 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## UnidadedeMedida MediaHoraria MediaMovel Valido ## 8577 ppb 3 - Sim ## 8578 ppb 8 - Sim ## 8579 ppb 11 - Sim ## 8580 ppb 11 - Sim ## 8581 ppb 16 - Sim ## 8582 ppb NA - Sim Agora vamos ler os mesmos dados com outro formato e testar e read.table funciona do mesmo jeito df2 &lt;- read.table(&quot;https://raw.githubusercontent.com/ibarraespinosa/cursoR/master/dados/NOXIPEN2014v2.txt&quot;) # Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec, : # linha 1 não tinha 6 elementos Vemos a mensagem de error, mas o que quer dizer. Se tu recever um banco de dados tipo .txt e quer abrir no R… ABRE ELE COM BLOCO DE NOTAS PRIMEIRO!!! O primeiro arquivo: O segundo arquivo é: qual é a diferença? Como vemos o segundo arquivo tem separação de “;”, entao, temos que lero arquivo assim: df2 &lt;- read.table(&quot;https://raw.githubusercontent.com/ibarraespinosa/cursoR/master/dados/NOXIPEN2014v2.txt&quot;, sep = &quot;;&quot;) head(df2) ## TipodeRede TipodeMonitoramento Tipo Data Hora ## 2 Automático CETESB Dados Primários 01/01/2014 01:00 ## 3 Automático CETESB Dados Primários 01/01/2014 02:00 ## 4 Automático CETESB Dados Primários 01/01/2014 03:00 ## 5 Automático CETESB Dados Primários 01/01/2014 04:00 ## 6 Automático CETESB Dados Primários 01/01/2014 05:00 ## 7 Automático CETESB Dados Primários 01/01/2014 06:00 ## CodigoEstação NomeEstação NomeParâmetro ## 2 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 3 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 4 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 5 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 6 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 7 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## UnidadedeMedida MediaHoraria MediaMovel Valido ## 2 ppb 9 - Não ## 3 ppb 9 - Sim ## 4 ppb 5 - Sim ## 5 ppb 4 - Sim ## 6 ppb 5 - Sim ## 7 ppb 5 - Sim tail(df2) ## TipodeRede TipodeMonitoramento Tipo Data Hora ## 8577 Automático CETESB Dados Primários 01/01/2015 19:00 ## 8578 Automático CETESB Dados Primários 01/01/2015 20:00 ## 8579 Automático CETESB Dados Primários 01/01/2015 21:00 ## 8580 Automático CETESB Dados Primários 01/01/2015 22:00 ## 8581 Automático CETESB Dados Primários 01/01/2015 23:00 ## 8582 Automático CETESB Dados Primários 01/01/2015 24:00 ## CodigoEstação NomeEstação NomeParâmetro ## 8577 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8578 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8579 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8580 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8581 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 8582 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## UnidadedeMedida MediaHoraria MediaMovel Valido ## 8577 ppb 3 - Sim ## 8578 ppb 8 - Sim ## 8579 ppb 11 - Sim ## 8580 ppb 11 - Sim ## 8581 ppb 16 - Sim ## 8582 ppb NA - Sim 4.1.1 Qua dificultades tu já enfrentou importando dados? 4.2 Exportando texto com write.table Exportar é bem facil, mas se sabemos os argumentos das funções, vai ser mais eficiente ainda. Vamos write.table args(write.table) ## function (x, file = &quot;&quot;, append = FALSE, quote = TRUE, sep = &quot; &quot;, ## eol = &quot;\\n&quot;, na = &quot;NA&quot;, dec = &quot;.&quot;, row.names = TRUE, col.names = TRUE, ## qmethod = c(&quot;escape&quot;, &quot;double&quot;), fileEncoding = &quot;&quot;) ## NULL Se temos um data-frame com colunas de classe character, quote = TRUE quer dizer que o arquivo de texto resultante vai ter aspas nas colunas de caracter. sep é como vão ser separadas as colunas. Se tu quer abrir o arquivo com Excel, poderia separar com “,”, “;”, &quot; “,”“… Depende como tu quer. eol quer dizer end of line, e é para ver a forma de colocar o “end of line” row.names.. esta TRUE mas SEMPRE SEMPRE SEMPRE COLOCA: row.names = FALSE. Se não, R vai adiiconar uma coluna com os indices das linhas…. col.names se tu quer o nome nas colunas… PRATICA! 4.3 Exportando objetos com save args(save) ## function (..., list = character(), file = stop(&quot;&#39;file&#39; must be specified&quot;), ## ascii = FALSE, version = NULL, envir = parent.frame(), compress = isTRUE(!ascii), ## compression_level, eval.promises = TRUE, precheck = TRUE) ## NULL save salva o objeto com a extensão .rda. Para carregar de volta o objeto, tem que ser feito com a função load args(load) ## function (file, envir = parent.frame(), verbose = FALSE) ## NULL O que pode ser ruim, porque as vezes tu esqueceu o nome do objeto no ambiente de R. Por exemplo, tu salvou o arquivo save(frenteFria, file = &quot;FrenteQuente.rda&quot;) logo tu carrega load(&quot;FrenteQuente.rda&quot;) acreditando que vai ter tua frente quente, mas o nome do objeto no ambiente de R é frenteDria… então, tem que ficar de olho, e como somos imperfeito, vai dar merda…. O melhor da função é que permite salvar com tipos de compressão, por exemplo compress = “xz”. 4.4 Exportando objetos com saveRDS Esta é uma das minhas funçoes favoritas no R args(saveRDS) ## function (object, file = &quot;&quot;, ascii = FALSE, version = NULL, compress = TRUE, ## refhook = NULL) ## NULL e args(readRDS) ## function (file, refhook = NULL) ## NULL Tu consegue salvar o objeto R de forma serializada e compactada com o argumento compress mas o melhor é quando vai chamar o objeto de volta ao R. Agora tu usa o readRDS e coloca o nome que tu quiser. saveRDS(FrenteQuente, &quot;FrenteQuente.rds&quot;) frenteQ &lt;- readRDS(&quot;FremteQuente.rds&quot;) 4.5 Processando nossa data-frame Tem numeroas formas e pacotes para ordenar, arrangiar (Arrange), mutar e cambiar as data-frames. As mais conhecidas são provablemente do universe tidyverse com o famoso pacote dplyr. Mas, nesta curso vamos focar em base. Vamos então revisar a classe de cada columna do nosso data-frame com a função sapply, apresentada em outro capitulo, mas se quiser, da uma olhada em ?sapply. sapply(df, class) ## TipodeRede TipodeMonitoramento Tipo ## &quot;factor&quot; &quot;factor&quot; &quot;factor&quot; ## Data Hora CodigoEstação ## &quot;factor&quot; &quot;factor&quot; &quot;integer&quot; ## NomeEstação NomeParâmetro UnidadedeMedida ## &quot;factor&quot; &quot;factor&quot; &quot;factor&quot; ## MediaHoraria MediaMovel Valido ## &quot;integer&quot; &quot;factor&quot; &quot;factor&quot; Quando nos trabalhamos com series de tempo, é importante ter a variabel de tempo reconhecida como “tempo”, especificamente como classe “POSIXct”. Mas, a classe de Data é “factor” e de Hora tambem “factor”, o que é ruim. Então, vamos criar uma variabel de tempo mais standard com formato 2018-05-17 19:14:36. Para isso temos que grudar as variabel Data e Hora. Faremios isso numa nova varaibel chamada tempo_char, adicionando ela diretamente no df com o cifrão DOLLAR $. O grude pode ser feito com as funções paste ou paste0. df$tempo_char &lt;- paste(df$Data, df$Hora) head(df$tempo_char) ## [1] &quot;01/01/2014 01:00&quot; &quot;01/01/2014 02:00&quot; &quot;01/01/2014 03:00&quot; ## [4] &quot;01/01/2014 04:00&quot; &quot;01/01/2014 05:00&quot; &quot;01/01/2014 06:00&quot; class(df$tempo_char) ## [1] &quot;character&quot; Esta melhorando mas ainda tem clase character. Para convertir a nossa classe POSIXct podemos usar a função as.POSIXct (olha as.POSIXct). Seus argumentos são: args(as.POSIXct) ## function (x, tz = &quot;&quot;, ...) ## NULL Então, vamos criar outra variabel tempo o formato POSIXct df$tempo &lt;- as.POSIXct(x = df$tempo_char, tz = &quot;Americas/Sao_Paulo&quot;, format = &quot;%d/%m/%Y %H:%M&quot;) head(df$tempo) ## [1] &quot;2014-01-01 01:00:00 Americas&quot; &quot;2014-01-01 02:00:00 Americas&quot; ## [3] &quot;2014-01-01 03:00:00 Americas&quot; &quot;2014-01-01 04:00:00 Americas&quot; ## [5] &quot;2014-01-01 05:00:00 Americas&quot; &quot;2014-01-01 06:00:00 Americas&quot; class(df$tempo) ## [1] &quot;POSIXct&quot; &quot;POSIXt&quot; Agora, vamos a extraer os dias da semana do tempo, mes e dia juliano: df$weekdays &lt;- format(df$tempo, &quot;%A&quot;) head(df$weekdays) ## [1] &quot;Wednesday&quot; &quot;Wednesday&quot; &quot;Wednesday&quot; &quot;Wednesday&quot; &quot;Wednesday&quot; &quot;Wednesday&quot; df$mes &lt;- format(df$tempo, &quot;%B&quot;) head(df$mes) ## [1] &quot;January&quot; &quot;January&quot; &quot;January&quot; &quot;January&quot; &quot;January&quot; &quot;January&quot; df$diajuliano &lt;- julian(df$tempo) head(df$diajuliano) ## Time differences in days ## [1] 16071.04 16071.08 16071.12 16071.17 16071.21 16071.25 df$ano &lt;- format(df$tempo, &quot;%Y&quot;) 4.6 aggregate Vamos a carregar a nossa data.frame. Primero uma olhada head(df) ## TipodeRede TipodeMonitoramento Tipo Data Hora ## 2 Automático CETESB Dados Primários 01/01/2014 01:00 ## 3 Automático CETESB Dados Primários 01/01/2014 02:00 ## 4 Automático CETESB Dados Primários 01/01/2014 03:00 ## 5 Automático CETESB Dados Primários 01/01/2014 04:00 ## 6 Automático CETESB Dados Primários 01/01/2014 05:00 ## 7 Automático CETESB Dados Primários 01/01/2014 06:00 ## CodigoEstação NomeEstação NomeParâmetro ## 2 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 3 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 4 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 5 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 6 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 7 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## UnidadedeMedida MediaHoraria MediaMovel Valido tempo_char ## 2 ppb 9 - Não 01/01/2014 01:00 ## 3 ppb 9 - Sim 01/01/2014 02:00 ## 4 ppb 5 - Sim 01/01/2014 03:00 ## 5 ppb 4 - Sim 01/01/2014 04:00 ## 6 ppb 5 - Sim 01/01/2014 05:00 ## 7 ppb 5 - Sim 01/01/2014 06:00 ## tempo weekdays mes diajuliano ano ## 2 2014-01-01 01:00:00 Wednesday January 16071.04 days 2014 ## 3 2014-01-01 02:00:00 Wednesday January 16071.08 days 2014 ## 4 2014-01-01 03:00:00 Wednesday January 16071.12 days 2014 ## 5 2014-01-01 04:00:00 Wednesday January 16071.17 days 2014 ## 6 2014-01-01 05:00:00 Wednesday January 16071.21 days 2014 ## 7 2014-01-01 06:00:00 Wednesday January 16071.25 days 2014 Poderiamos calcular a media horaria por dia da semana. Então: dff &lt;- aggregate(df$MediaHoraria, by = list(df$weekdays), sum, na.rm = T) dff ## Group.1 x ## 1 Friday 42558 ## 2 Monday 34057 ## 3 Saturday 32298 ## 4 Sunday 20327 ## 5 Thursday 41199 ## 6 Tuesday 37904 ## 7 Wednesday 40180 names(dff) &lt;- c(&quot;dias&quot;, &quot;MediaHoraria&quot;) dff$sd &lt;- aggregate(df$MediaHoraria, by = list(df$weekdays), sum, na.rm = T)$x dff ## dias MediaHoraria sd ## 1 Friday 42558 42558 ## 2 Monday 34057 34057 ## 3 Saturday 32298 32298 ## 4 Sunday 20327 20327 ## 5 Thursday 41199 41199 ## 6 Tuesday 37904 37904 ## 7 Wednesday 40180 40180 4.7 subset Como poderiamos escolher só o mes de janeiro?? #[ LINHAS , COLUNAS ] head(df[df$mes == &quot;janeiro&quot;, ]) #TODAS AS COLUNAS ## [1] TipodeRede TipodeMonitoramento Tipo ## [4] Data Hora CodigoEstação ## [7] NomeEstação NomeParâmetro UnidadedeMedida ## [10] MediaHoraria MediaMovel Valido ## [13] tempo_char tempo weekdays ## [16] mes diajuliano ano ## &lt;0 rows&gt; (or 0-length row.names) Mes janeiro pero solo o valor mediahoraria, que retorna um vetor numerico names(df) ## [1] &quot;TipodeRede&quot; &quot;TipodeMonitoramento&quot; &quot;Tipo&quot; ## [4] &quot;Data&quot; &quot;Hora&quot; &quot;CodigoEstação&quot; ## [7] &quot;NomeEstação&quot; &quot;NomeParâmetro&quot; &quot;UnidadedeMedida&quot; ## [10] &quot;MediaHoraria&quot; &quot;MediaMovel&quot; &quot;Valido&quot; ## [13] &quot;tempo_char&quot; &quot;tempo&quot; &quot;weekdays&quot; ## [16] &quot;mes&quot; &quot;diajuliano&quot; &quot;ano&quot; head(df[df$mes == &quot;janeiro&quot;, 10]) ## integer(0) head(df[df$mes == &quot;janeiro&quot;, &quot;MediaHoraria&quot;]) ## integer(0) class(df[df$mes == &quot;janeiro&quot;, &quot;MediaHoraria&quot;]) ## [1] &quot;integer&quot; Mas vamos salvar o nosso “df” saveRDS(df, &quot;df.rds&quot;) 4.8 data.table, read_xl e mais data.table é um pacote que apresenta a classe data.table, que é como uma versão melhorada da classe data-frame O termo especifico é que data-table tem herencia (inherits) da classe data.frame Vamos ver como funciona data.table lendo o dois arquivos e comparar quanto tempo demoram cada um. df1 &lt;- print(system.time(read.table(&quot;https://raw.githubusercontent.com/ibarraespinosa/cursoR/master/dados/NOXIPEN2014.txt&quot;, h = T))) ## user system elapsed ## 0.071 0.001 0.198 library(data.table) df2 &lt;- print(system.time(fread(&quot;https://raw.githubusercontent.com/ibarraespinosa/cursoR/master/dados/NOXIPEN2014.txt&quot;, h = T))) ## user system elapsed ## 0.054 0.009 0.299 olha que estamos usando a função fread. read_xl é mais uma função do universo tidyverse que permite importar excel no R, diretamente e inteligentemente. 4.9 NetCDF O NetCDF (Network Common Data Form) é um conjunto de bibliotecas de software e formatos de dados independentes de máquina e autodescritivos com suporte para criação, acesso e compartilhamento de dados científicos orientados a matrizes. Arquivos NetCDF (criado por essa biblioteca ou por programas que utilizam essa biblioteca) são arquivos compostos por dados, atributos e metadados. O pacote ncdf4 pode ser usado para acessar a essa biblioteca, os comandos abaixo instalam e carregam esse pacote: #install.packages(&quot;ncdf4&quot;) # instala o pacote library(&quot;ncdf4&quot;) # carrega o pacote nc_version() # que retorna a versão da biblioteca ## [1] &quot;ncdf4_1.16_20170401&quot; Um exmplo de NetCDF: download.file(&quot;https://github.com/ibarraespinosa/cursoR/raw/master/dados/met_em.d03.2016-01-10.nc&quot;, destfile = &quot;~/met_em.d03.2016-01-10.nc&quot;) wrf &lt;- ncdf4::nc_open(&quot;~/met_em.d03.2016-01-10.nc&quot;) O objeto wrf contém algumas informações sobre o conteúdo do arquivo, com um print(wrf) ou simplesmente wrf visualizamos o conteúdo do arquivo: class(wrf) ## [1] &quot;ncdf4&quot; wrf ## File ~/met_em.d03.2016-01-10.nc (NC_FORMAT_64BIT): ## ## 92 variables (excluding dimension variables): ## char Times[DateStrLen,Time] ## float PRES[west_east,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: ## description: ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOIL_LAYERS[west_east,south_north,num_st_layers,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: ## description: ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM[west_east,south_north,num_sm_layers,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: ## description: ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST[west_east,south_north,num_st_layers,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: ## description: ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float GHT[west_east,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: m ## description: Height ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float HGTTROP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m ## description: Height of tropopause ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float TTROP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: Temperature at tropopause ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PTROPNN[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: PTROP, used for nearest neighbor interp ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PTROP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: Pressure of tropopause ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VTROP[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m s-1 ## description: V at tropopause ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float UTROP[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m s-1 ## description: U at tropopause ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float HGTMAXW[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m ## description: Height of max wind level ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float TMAXW[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: Temperature at max wind level ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PMAXWNN[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: PMAXW, used for nearest neighbor interp ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PMAXW[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: Pressure of max wind level ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VMAXW[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m s-1 ## description: V at max wind ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float UMAXW[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m s-1 ## description: U at max wind ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float SNOWH[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m ## description: Physical Snow Depth ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SNOW[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: kg m-2 ## description: Water equivalent snow depth ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SKINTEMP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: Skin temperature ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOILHGT[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m ## description: Terrain field of source analysis ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LANDSEA[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: proprtn ## description: Land/Sea flag (1=land, 0 or 2=sea) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SEAICE[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: proprtn ## description: Ice flag ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST100200[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: T 100-200 cm below ground layer (Bottom) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST040100[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: T 40-100 cm below ground layer (Upper) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST010040[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: T 10-40 cm below ground layer (Upper) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST000010[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: T 0-10 cm below ground layer (Upper) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM100200[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: fraction ## description: Soil Moist 100-200 cm below gr layer ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM040100[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: fraction ## description: Soil Moist 40-100 cm below grn layer ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM010040[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: fraction ## description: Soil Moist 10-40 cm below grn layer ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM000010[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: fraction ## description: Soil Moist 0-10 cm below grn layer (Up) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PSFC[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: Surface Pressure ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float RH[west_east,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: % ## description: Relative Humidity ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VV[west_east,south_north_stag,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: m s-1 ## description: V ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float UU[west_east_stag,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: m s-1 ## description: U ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float TT[west_east,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: K ## description: Temperature ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PMSL[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: Sea-level Pressure ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float URB_PARAM[west_east,south_north,z-dimension0132,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: dimensionless ## description: Urban_Parameters ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LAKE_DEPTH[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: meters MSL ## description: Topography height ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VAR_SSO[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: meters2 MSL ## description: Variance of Subgrid Scale Orography ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OL4[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OL3[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OL2[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OL1[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OA4[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OA3[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OA2[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OA1[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VAR[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float CON[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SLOPECAT[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: category ## description: Dominant category ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SNOALB[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: percent ## description: Maximum snow albedo ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LAI12M[west_east,south_north,z-dimension0012,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: m^2/m^2 ## description: MODIS LAI ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float GREENFRAC[west_east,south_north,z-dimension0012,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: fraction ## description: MODIS FPAR ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ALBEDO12M[west_east,south_north,z-dimension0012,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: percent ## description: Monthly surface albedo ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SCB_DOM[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: category ## description: Dominant category ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOILCBOT[west_east,south_north,z-dimension0016,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: category ## description: 16-category bottom-layer soil type ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SCT_DOM[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: category ## description: Dominant category ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOILCTOP[west_east,south_north,z-dimension0016,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: category ## description: 16-category top-layer soil type ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOILTEMP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Kelvin ## description: Annual mean deep soil temperature ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float HGT_M[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: meters MSL ## description: GMTED2010 30-arc-second topography height ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LU_INDEX[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: category ## description: Dominant category ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LANDUSEF[west_east,south_north,z-dimension0024,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: category ## description: 24-category USGS landuse ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float COSALPHA_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Cosine of rotation angle on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float SINALPHA_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Sine of rotation angle on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float COSALPHA_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Cosine of rotation angle on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float SINALPHA_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Sine of rotation angle on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float XLONG_C[west_east_stag,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Longitude at grid cell corners ## stagger: CORNER ## sr_x: 1 ## sr_y: 1 ## float XLAT_C[west_east_stag,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Latitude at grid cell corners ## stagger: CORNER ## sr_x: 1 ## sr_y: 1 ## float LANDMASK[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Landmask : 1=land, 0=water ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float COSALPHA[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Cosine of rotation angle ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SINALPHA[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Sine of rotation angle ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float F[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: - ## description: Coriolis F parameter ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float E[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: - ## description: Coriolis E parameter ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_UY[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (y-dir) on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_VY[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (y-dir) on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_MY[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (y-dir) on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_UX[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (x-dir) on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_VX[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (x-dir) on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_MX[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (x-dir) on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_M[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float CLONG[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Computational longitude on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float CLAT[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Computational latitude on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float XLONG_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Longitude on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float XLAT_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Latitude on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float XLONG_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Longitude on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float XLAT_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Latitude on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float XLONG_M[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Longitude on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float XLAT_M[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Latitude on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## ## 13 dimensions: ## Time Size:1 *** is unlimited *** ## DateStrLen Size:19 ## west_east Size:51 ## south_north Size:51 ## num_metgrid_levels Size:27 ## num_st_layers Size:4 ## num_sm_layers Size:4 ## south_north_stag Size:52 ## west_east_stag Size:52 ## z-dimension0132 Size:132 ## z-dimension0012 Size:12 ## z-dimension0016 Size:16 ## z-dimension0024 Size:24 ## ## 76 global attributes: ## TITLE: OUTPUT FROM METGRID V3.9.1 ## SIMULATION_START_DATE: 2016-01-10_00:00:00 ## WEST-EAST_GRID_DIMENSION: 52 ## SOUTH-NORTH_GRID_DIMENSION: 52 ## BOTTOM-TOP_GRID_DIMENSION: 27 ## WEST-EAST_PATCH_START_UNSTAG: 1 ## WEST-EAST_PATCH_END_UNSTAG: 51 ## WEST-EAST_PATCH_START_STAG: 1 ## WEST-EAST_PATCH_END_STAG: 52 ## SOUTH-NORTH_PATCH_START_UNSTAG: 1 ## SOUTH-NORTH_PATCH_END_UNSTAG: 51 ## SOUTH-NORTH_PATCH_START_STAG: 1 ## SOUTH-NORTH_PATCH_END_STAG: 52 ## GRIDTYPE: C ## DX: 1000 ## DY: 1000 ## DYN_OPT: 2 ## CEN_LAT: -23.5996932983398 ## CEN_LON: -46.6294555664062 ## TRUELAT1: -23 ## TRUELAT2: -24 ## MOAD_CEN_LAT: -23.6000061035156 ## STAND_LON: -45 ## POLE_LAT: 90 ## POLE_LON: 0 ## corner_lats: -23.8218078613281 ## corner_lats: -23.3720855712891 ## corner_lats: -23.3771743774414 ## corner_lats: -23.826904296875 ## corner_lats: -23.8217391967773 ## corner_lats: -23.3720245361328 ## corner_lats: -23.3772277832031 ## corner_lats: -23.8269424438477 ## corner_lats: -23.826286315918 ## corner_lats: -23.3675918579102 ## corner_lats: -23.372673034668 ## corner_lats: -23.8314056396484 ## corner_lats: -23.8262329101562 ## corner_lats: -23.3675231933594 ## corner_lats: -23.3727111816406 ## corner_lats: -23.8314437866211 ## corner_lons: -46.8780517578125 ## corner_lons: -46.8716430664062 ## corner_lons: -46.3817138671875 ## corner_lons: -46.3864440917969 ## corner_lons: -46.8829650878906 ## corner_lons: -46.8765258789062 ## corner_lons: -46.3768005371094 ## corner_lons: -46.3815307617188 ## corner_lons: -46.8781127929688 ## corner_lons: -46.87158203125 ## corner_lons: -46.3816528320312 ## corner_lons: -46.386474609375 ## corner_lons: -46.8830261230469 ## corner_lons: -46.87646484375 ## corner_lons: -46.3767700195312 ## corner_lons: -46.3815612792969 ## MAP_PROJ: 1 ## MMINLU: USGS ## NUM_LAND_CAT: 24 ## ISWATER: 16 ## ISLAKE: -1 ## ISICE: 24 ## ISURBAN: 1 ## ISOILWATER: 14 ## grid_id: 3 ## parent_id: 2 ## i_parent_start: 35 ## j_parent_start: 33 ## i_parent_end: 51 ## j_parent_end: 49 ## parent_grid_ratio: 3 ## sr_x: 1 ## sr_y: 1 ## NUM_METGRID_SOIL_LEVELS: 4 ## FLAG_METGRID: 1 ## FLAG_EXCLUDED_MIDDLE: 0 ## FLAG_SOIL_LAYERS: 1 ## FLAG_SNOW: 1 ## FLAG_PSFC: 1 ## FLAG_SM000010: 1 ## FLAG_SM010040: 1 ## FLAG_SM040100: 1 ## FLAG_SM100200: 1 ## FLAG_ST000010: 1 ## FLAG_ST010040: 1 ## FLAG_ST040100: 1 ## FLAG_ST100200: 1 ## FLAG_SLP: 1 ## FLAG_SNOWH: 1 ## FLAG_SOILHGT: 1 ## FLAG_UTROP: 1 ## FLAG_VTROP: 1 ## FLAG_TTROP: 1 ## FLAG_PTROP: 1 ## FLAG_PTROPNN: 1 ## FLAG_HGTTROP: 1 ## FLAG_UMAXW: 1 ## FLAG_VMAXW: 1 ## FLAG_TMAXW: 1 ## FLAG_PMAXW: 1 ## FLAG_PMAXWNN: 1 ## FLAG_HGTMAXW: 1 ## FLAG_MF_XY: 1 ## FLAG_LAI12M: 1 ## FLAG_LAKE_DEPTH: 1 que mostra o nome do arquivo (e versão da biblioteca usada para criar), número de variáveis (92 no arquivo de exemplo), uma descrição de cada variável (incluindo atributos) as dimensões (13 para esse arquivo) e os atributos globais. Agora vamos abrir alguma variável: names(wrf$var) # print no nome de cada variavel ## [1] &quot;Times&quot; &quot;PRES&quot; &quot;SOIL_LAYERS&quot; &quot;SM&quot; &quot;ST&quot; ## [6] &quot;GHT&quot; &quot;HGTTROP&quot; &quot;TTROP&quot; &quot;PTROPNN&quot; &quot;PTROP&quot; ## [11] &quot;VTROP&quot; &quot;UTROP&quot; &quot;HGTMAXW&quot; &quot;TMAXW&quot; &quot;PMAXWNN&quot; ## [16] &quot;PMAXW&quot; &quot;VMAXW&quot; &quot;UMAXW&quot; &quot;SNOWH&quot; &quot;SNOW&quot; ## [21] &quot;SKINTEMP&quot; &quot;SOILHGT&quot; &quot;LANDSEA&quot; &quot;SEAICE&quot; &quot;ST100200&quot; ## [26] &quot;ST040100&quot; &quot;ST010040&quot; &quot;ST000010&quot; &quot;SM100200&quot; &quot;SM040100&quot; ## [31] &quot;SM010040&quot; &quot;SM000010&quot; &quot;PSFC&quot; &quot;RH&quot; &quot;VV&quot; ## [36] &quot;UU&quot; &quot;TT&quot; &quot;PMSL&quot; &quot;URB_PARAM&quot; &quot;LAKE_DEPTH&quot; ## [41] &quot;VAR_SSO&quot; &quot;OL4&quot; &quot;OL3&quot; &quot;OL2&quot; &quot;OL1&quot; ## [46] &quot;OA4&quot; &quot;OA3&quot; &quot;OA2&quot; &quot;OA1&quot; &quot;VAR&quot; ## [51] &quot;CON&quot; &quot;SLOPECAT&quot; &quot;SNOALB&quot; &quot;LAI12M&quot; &quot;GREENFRAC&quot; ## [56] &quot;ALBEDO12M&quot; &quot;SCB_DOM&quot; &quot;SOILCBOT&quot; &quot;SCT_DOM&quot; &quot;SOILCTOP&quot; ## [61] &quot;SOILTEMP&quot; &quot;HGT_M&quot; &quot;LU_INDEX&quot; &quot;LANDUSEF&quot; &quot;COSALPHA_V&quot; ## [66] &quot;SINALPHA_V&quot; &quot;COSALPHA_U&quot; &quot;SINALPHA_U&quot; &quot;XLONG_C&quot; &quot;XLAT_C&quot; ## [71] &quot;LANDMASK&quot; &quot;COSALPHA&quot; &quot;SINALPHA&quot; &quot;F&quot; &quot;E&quot; ## [76] &quot;MAPFAC_UY&quot; &quot;MAPFAC_VY&quot; &quot;MAPFAC_MY&quot; &quot;MAPFAC_UX&quot; &quot;MAPFAC_VX&quot; ## [81] &quot;MAPFAC_MX&quot; &quot;MAPFAC_U&quot; &quot;MAPFAC_V&quot; &quot;MAPFAC_M&quot; &quot;CLONG&quot; ## [86] &quot;CLAT&quot; &quot;XLONG_U&quot; &quot;XLAT_U&quot; &quot;XLONG_V&quot; &quot;XLAT_V&quot; ## [91] &quot;XLONG_M&quot; &quot;XLAT_M&quot; TEMP &lt;- ncdf4::ncvar_get(wrf, &quot;TT&quot;) # escolho você picachu class(TEMP) ## [1] &quot;array&quot; Como o NetCDF é organizado para guardar matrizes (arrays), só sabemos que a variável ST é um array ncatt_get(wrf,&quot;TT&quot;) # ou ncatt_get(wrf,&quot;TT&quot;,verbose = T) ## $FieldType ## [1] 104 ## ## $MemoryOrder ## [1] &quot;XYZ&quot; ## ## $units ## [1] &quot;K&quot; ## ## $description ## [1] &quot;Temperature&quot; ## ## $stagger ## [1] &quot;M&quot; ## ## $sr_x ## [1] 1 ## ## $sr_y ## [1] 1 dim(TEMP) ## [1] 51 51 27 praticamente a mesma informação do print anterior: float TT[west_east,south_north,num_metgrid_levels,Time] FieldType: 104 MemoryOrder: XYZ units: K description: Temperature stagger: M sr_x: 1 sr_y: 1 como temos apenas 1 tempo essa dimensão é desconsiderada para simplificar. A latitude de cada ponto de grade, assim como longitude níveis e tempo podem ser extraídas: lat &lt;- ncvar_get(wrf, &quot;XLAT_M&quot;) lon &lt;- ncvar_get(wrf, &quot;XLONG_M&quot;) time &lt;- ncvar_get(wrf, &quot;Times&quot;) O metadado de Longitude: float XLONG_M[west_east,south_north,Time] FieldType: 104 MemoryOrder: XY units: degrees longitude description: Longitude on mass grid stagger: M sr_x: 1 sr_y: 1 Latitude: float XLAT_M[west_east,south_north,Time] FieldType: 104 MemoryOrder: XY units: degrees latitude description: Latitude on mass grid stagger: M sr_x: 1 sr_y: 1 e a altura: float GHT[west_east,south_north,num_metgrid_levels,Time] FieldType: 104 MemoryOrder: XYZ units: m description: Height stagger: M sr_x: 1 sr_y: 1 Da mesma forma com que podemos acessar variáveis e atributos com ncvar_get e ncatt_get, podemos modificar estes valores com ncvar_put e ncatt_put. Outras operações como renomear (ncvar_rename) e trocar o valor de missval (ncvar_change_missval) também estão disponíveis. DICA: ncatt_get e ncatt_put acessam e alteram os atributos de váriaveis e também atributos globais do NetCDF usando o argumento varid=0. Para salvar as alterações e/ou liberar o acesso ao arquivo use a função nc_close (ou a função nc_sync que sincroniza o NetCDF mas não fecha a conexão com o arquivo). nc_close(wrf) # ou nc_sync(wrf) Novas dimensões e também novas variáveis podem ser criadas com ncvar_def e ncvar_add em um arquivo aberto com permissão de leitura, como por exemplo: wrf &lt;- nc_open(&quot;~/met_em.d03.2016-01-10.nc&quot;, write=TRUE) extrema &lt;- ncvar_def(name = &quot;Tex&quot;, units = &quot;K&quot;, dim = list(wrf$dim$west_east, wrf$dim$south_north, wrf$dim$Time), missval = -999, longname = &quot;temperatura extrema&quot;) ncvar_add(wrf, extrema) names(wrf$var) nc_close(wrf) Se esse arquivo for aberto novamente vai conter 93 variáveis junto com a variável Tex da forma que definimos, caso queria os mesmos atributos que as demais é só usar a função ncatt_get na variável. wrf &lt;- nc_open(&quot;~/met_em.d03.2016-01-10.nc&quot;,write=T) print(wrf) ## File ~/met_em.d03.2016-01-10.nc (NC_FORMAT_64BIT): ## ## 92 variables (excluding dimension variables): ## char Times[DateStrLen,Time] ## float PRES[west_east,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: ## description: ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOIL_LAYERS[west_east,south_north,num_st_layers,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: ## description: ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM[west_east,south_north,num_sm_layers,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: ## description: ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST[west_east,south_north,num_st_layers,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: ## description: ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float GHT[west_east,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: m ## description: Height ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float HGTTROP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m ## description: Height of tropopause ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float TTROP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: Temperature at tropopause ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PTROPNN[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: PTROP, used for nearest neighbor interp ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PTROP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: Pressure of tropopause ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VTROP[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m s-1 ## description: V at tropopause ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float UTROP[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m s-1 ## description: U at tropopause ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float HGTMAXW[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m ## description: Height of max wind level ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float TMAXW[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: Temperature at max wind level ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PMAXWNN[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: PMAXW, used for nearest neighbor interp ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PMAXW[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: Pressure of max wind level ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VMAXW[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m s-1 ## description: V at max wind ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float UMAXW[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m s-1 ## description: U at max wind ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float SNOWH[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m ## description: Physical Snow Depth ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SNOW[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: kg m-2 ## description: Water equivalent snow depth ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SKINTEMP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: Skin temperature ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOILHGT[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: m ## description: Terrain field of source analysis ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LANDSEA[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: proprtn ## description: Land/Sea flag (1=land, 0 or 2=sea) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SEAICE[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: proprtn ## description: Ice flag ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST100200[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: T 100-200 cm below ground layer (Bottom) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST040100[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: T 40-100 cm below ground layer (Upper) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST010040[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: T 10-40 cm below ground layer (Upper) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ST000010[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: K ## description: T 0-10 cm below ground layer (Upper) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM100200[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: fraction ## description: Soil Moist 100-200 cm below gr layer ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM040100[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: fraction ## description: Soil Moist 40-100 cm below grn layer ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM010040[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: fraction ## description: Soil Moist 10-40 cm below grn layer ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SM000010[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: fraction ## description: Soil Moist 0-10 cm below grn layer (Up) ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PSFC[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: Surface Pressure ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float RH[west_east,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: % ## description: Relative Humidity ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VV[west_east,south_north_stag,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: m s-1 ## description: V ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float UU[west_east_stag,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: m s-1 ## description: U ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float TT[west_east,south_north,num_metgrid_levels,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: K ## description: Temperature ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float PMSL[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Pa ## description: Sea-level Pressure ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float URB_PARAM[west_east,south_north,z-dimension0132,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: dimensionless ## description: Urban_Parameters ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LAKE_DEPTH[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: meters MSL ## description: Topography height ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VAR_SSO[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: meters2 MSL ## description: Variance of Subgrid Scale Orography ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OL4[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OL3[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OL2[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OL1[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OA4[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OA3[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OA2[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float OA1[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float VAR[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float CON[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: whoknows ## description: something ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SLOPECAT[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: category ## description: Dominant category ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SNOALB[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: percent ## description: Maximum snow albedo ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LAI12M[west_east,south_north,z-dimension0012,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: m^2/m^2 ## description: MODIS LAI ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float GREENFRAC[west_east,south_north,z-dimension0012,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: fraction ## description: MODIS FPAR ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float ALBEDO12M[west_east,south_north,z-dimension0012,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: percent ## description: Monthly surface albedo ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SCB_DOM[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: category ## description: Dominant category ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOILCBOT[west_east,south_north,z-dimension0016,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: category ## description: 16-category bottom-layer soil type ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SCT_DOM[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: category ## description: Dominant category ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOILCTOP[west_east,south_north,z-dimension0016,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: category ## description: 16-category top-layer soil type ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SOILTEMP[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: Kelvin ## description: Annual mean deep soil temperature ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float HGT_M[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: meters MSL ## description: GMTED2010 30-arc-second topography height ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LU_INDEX[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: category ## description: Dominant category ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float LANDUSEF[west_east,south_north,z-dimension0024,Time] ## FieldType: 104 ## MemoryOrder: XYZ ## units: category ## description: 24-category USGS landuse ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float COSALPHA_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Cosine of rotation angle on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float SINALPHA_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Sine of rotation angle on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float COSALPHA_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Cosine of rotation angle on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float SINALPHA_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Sine of rotation angle on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float XLONG_C[west_east_stag,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Longitude at grid cell corners ## stagger: CORNER ## sr_x: 1 ## sr_y: 1 ## float XLAT_C[west_east_stag,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Latitude at grid cell corners ## stagger: CORNER ## sr_x: 1 ## sr_y: 1 ## float LANDMASK[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Landmask : 1=land, 0=water ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float COSALPHA[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Cosine of rotation angle ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float SINALPHA[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Sine of rotation angle ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float F[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: - ## description: Coriolis F parameter ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float E[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: - ## description: Coriolis E parameter ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_UY[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (y-dir) on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_VY[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (y-dir) on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_MY[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (y-dir) on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_UX[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (x-dir) on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_VX[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (x-dir) on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_MX[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor (x-dir) on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float MAPFAC_M[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: none ## description: Mapfactor on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float CLONG[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Computational longitude on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float CLAT[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Computational latitude on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float XLONG_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Longitude on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float XLAT_U[west_east_stag,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Latitude on U grid ## stagger: U ## sr_x: 1 ## sr_y: 1 ## float XLONG_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Longitude on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float XLAT_V[west_east,south_north_stag,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Latitude on V grid ## stagger: V ## sr_x: 1 ## sr_y: 1 ## float XLONG_M[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees longitude ## description: Longitude on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## float XLAT_M[west_east,south_north,Time] ## FieldType: 104 ## MemoryOrder: XY ## units: degrees latitude ## description: Latitude on mass grid ## stagger: M ## sr_x: 1 ## sr_y: 1 ## ## 13 dimensions: ## Time Size:1 *** is unlimited *** ## DateStrLen Size:19 ## west_east Size:51 ## south_north Size:51 ## num_metgrid_levels Size:27 ## num_st_layers Size:4 ## num_sm_layers Size:4 ## south_north_stag Size:52 ## west_east_stag Size:52 ## z-dimension0132 Size:132 ## z-dimension0012 Size:12 ## z-dimension0016 Size:16 ## z-dimension0024 Size:24 ## ## 76 global attributes: ## TITLE: OUTPUT FROM METGRID V3.9.1 ## SIMULATION_START_DATE: 2016-01-10_00:00:00 ## WEST-EAST_GRID_DIMENSION: 52 ## SOUTH-NORTH_GRID_DIMENSION: 52 ## BOTTOM-TOP_GRID_DIMENSION: 27 ## WEST-EAST_PATCH_START_UNSTAG: 1 ## WEST-EAST_PATCH_END_UNSTAG: 51 ## WEST-EAST_PATCH_START_STAG: 1 ## WEST-EAST_PATCH_END_STAG: 52 ## SOUTH-NORTH_PATCH_START_UNSTAG: 1 ## SOUTH-NORTH_PATCH_END_UNSTAG: 51 ## SOUTH-NORTH_PATCH_START_STAG: 1 ## SOUTH-NORTH_PATCH_END_STAG: 52 ## GRIDTYPE: C ## DX: 1000 ## DY: 1000 ## DYN_OPT: 2 ## CEN_LAT: -23.5996932983398 ## CEN_LON: -46.6294555664062 ## TRUELAT1: -23 ## TRUELAT2: -24 ## MOAD_CEN_LAT: -23.6000061035156 ## STAND_LON: -45 ## POLE_LAT: 90 ## POLE_LON: 0 ## corner_lats: -23.8218078613281 ## corner_lats: -23.3720855712891 ## corner_lats: -23.3771743774414 ## corner_lats: -23.826904296875 ## corner_lats: -23.8217391967773 ## corner_lats: -23.3720245361328 ## corner_lats: -23.3772277832031 ## corner_lats: -23.8269424438477 ## corner_lats: -23.826286315918 ## corner_lats: -23.3675918579102 ## corner_lats: -23.372673034668 ## corner_lats: -23.8314056396484 ## corner_lats: -23.8262329101562 ## corner_lats: -23.3675231933594 ## corner_lats: -23.3727111816406 ## corner_lats: -23.8314437866211 ## corner_lons: -46.8780517578125 ## corner_lons: -46.8716430664062 ## corner_lons: -46.3817138671875 ## corner_lons: -46.3864440917969 ## corner_lons: -46.8829650878906 ## corner_lons: -46.8765258789062 ## corner_lons: -46.3768005371094 ## corner_lons: -46.3815307617188 ## corner_lons: -46.8781127929688 ## corner_lons: -46.87158203125 ## corner_lons: -46.3816528320312 ## corner_lons: -46.386474609375 ## corner_lons: -46.8830261230469 ## corner_lons: -46.87646484375 ## corner_lons: -46.3767700195312 ## corner_lons: -46.3815612792969 ## MAP_PROJ: 1 ## MMINLU: USGS ## NUM_LAND_CAT: 24 ## ISWATER: 16 ## ISLAKE: -1 ## ISICE: 24 ## ISURBAN: 1 ## ISOILWATER: 14 ## grid_id: 3 ## parent_id: 2 ## i_parent_start: 35 ## j_parent_start: 33 ## i_parent_end: 51 ## j_parent_end: 49 ## parent_grid_ratio: 3 ## sr_x: 1 ## sr_y: 1 ## NUM_METGRID_SOIL_LEVELS: 4 ## FLAG_METGRID: 1 ## FLAG_EXCLUDED_MIDDLE: 0 ## FLAG_SOIL_LAYERS: 1 ## FLAG_SNOW: 1 ## FLAG_PSFC: 1 ## FLAG_SM000010: 1 ## FLAG_SM010040: 1 ## FLAG_SM040100: 1 ## FLAG_SM100200: 1 ## FLAG_ST000010: 1 ## FLAG_ST010040: 1 ## FLAG_ST040100: 1 ## FLAG_ST100200: 1 ## FLAG_SLP: 1 ## FLAG_SNOWH: 1 ## FLAG_SOILHGT: 1 ## FLAG_UTROP: 1 ## FLAG_VTROP: 1 ## FLAG_TTROP: 1 ## FLAG_PTROP: 1 ## FLAG_PTROPNN: 1 ## FLAG_HGTTROP: 1 ## FLAG_UMAXW: 1 ## FLAG_VMAXW: 1 ## FLAG_TMAXW: 1 ## FLAG_PMAXW: 1 ## FLAG_PMAXWNN: 1 ## FLAG_HGTMAXW: 1 ## FLAG_MF_XY: 1 ## FLAG_LAI12M: 1 ## FLAG_LAKE_DEPTH: 1 O pacote possue ainda funções mais específicas para a criação de arquivos em NetCDF como nc_create, funções que definem dimenções como ncdim_def e funções para colocar e tirar o arquivo de modo de definição nc_redef e nc_enddef. DICA: o NetCDF no R funciona de forma parecida com ouma lista ou data frame, podemos “ver” ou selecionar suas sub-partes (sub-sub-partes…) com “$” e TAB. "],
["plotando.html", "Capitulo 5 Plotando 5.1 plot 5.2 ggplot", " Capitulo 5 Plotando 5.1 plot exemplo df &lt;- readRDS(&quot;df.rds&quot;) head(df) ## TipodeRede TipodeMonitoramento Tipo Data Hora ## 2 Automático CETESB Dados Primários 01/01/2014 01:00 ## 3 Automático CETESB Dados Primários 01/01/2014 02:00 ## 4 Automático CETESB Dados Primários 01/01/2014 03:00 ## 5 Automático CETESB Dados Primários 01/01/2014 04:00 ## 6 Automático CETESB Dados Primários 01/01/2014 05:00 ## 7 Automático CETESB Dados Primários 01/01/2014 06:00 ## CodigoEstação NomeEstação NomeParâmetro ## 2 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 3 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 4 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 5 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 6 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## 7 95 Cid.Universitária-USP-Ipen NOx (Óxidos de Nitrogênio) ## UnidadedeMedida MediaHoraria MediaMovel Valido tempo_char ## 2 ppb 9 - Não 01/01/2014 01:00 ## 3 ppb 9 - Sim 01/01/2014 02:00 ## 4 ppb 5 - Sim 01/01/2014 03:00 ## 5 ppb 4 - Sim 01/01/2014 04:00 ## 6 ppb 5 - Sim 01/01/2014 05:00 ## 7 ppb 5 - Sim 01/01/2014 06:00 ## tempo weekdays mes diajuliano ano ## 2 2014-01-01 01:00:00 Wednesday January 16071.04 days 2014 ## 3 2014-01-01 02:00:00 Wednesday January 16071.08 days 2014 ## 4 2014-01-01 03:00:00 Wednesday January 16071.12 days 2014 ## 5 2014-01-01 04:00:00 Wednesday January 16071.17 days 2014 ## 6 2014-01-01 05:00:00 Wednesday January 16071.21 days 2014 ## 7 2014-01-01 06:00:00 Wednesday January 16071.25 days 2014 plot basico args(plot) ## function (x, y, ...) ## NULL então plot(x = df$tempo, y = df$MediaHoraria) feio, ne? plot(x = df$tempo[1:100], y = df$MediaHoraria[1:100], pch = 16, type = &quot;b&quot;, col = &quot;blue&quot;, xlab = &quot;horas&quot;, ylab = &quot;NO2[ppb]&quot;, main = &quot;Plot menos feio&quot;) Vamos a colocar DOIS plots plot(x = df$tempo[1:100], y = df$MediaHoraria[101:200], pch = 16, type = &quot;b&quot;, col = &quot;blue&quot;, xlab = &quot;horas&quot;, ylab = &quot;NO2[ppb]&quot;, main = &quot;Plot estranho&quot;) lines(x = df$tempo[1:100], y = df$MediaHoraria[1:100], pch = 15, type = &quot;b&quot;, col = &quot;red&quot;) Se tu é fan de BASE PLOT, tudo bem :) 5.2 ggplot Tem um monte de recursos para ggplot na web library(ggplot2) ggplot(df) ggplot(df, aes(x = tempo, y = MediaHoraria)) ggplot(df, aes(x = tempo, y = MediaHoraria)) + geom_line() ## Warning: Removed 1 rows containing missing values (geom_path). opa ggplot(df, aes(x = tempo, y = MediaHoraria, colour = mes)) + geom_line() ## Warning: Removed 1 rows containing missing values (geom_path). deixando so 2014 df &lt;- df[df$ano == 2014,] ggplot(df, aes(x = tempo, y = MediaHoraria, colour = mes)) + geom_line() + theme_bw() ggplot(df, aes(x = tempo, y = MediaHoraria, colour = MediaHoraria)) + geom_line() ggplot(df, aes(x = tempo, y = MediaHoraria, colour = MediaHoraria)) + geom_line() + facet_wrap(~mes) ggplot(df, aes(x = tempo, y = MediaHoraria, colour = MediaHoraria)) + geom_line() + facet_wrap(~mes, scales = &quot;free&quot;) Y para terminar, meu theme favorito devtools::install_github(&quot;atmoschem/veinreport&quot;) e logo library(veinreport) library(cptcity) ggplot(df, aes(x = tempo, y = MediaHoraria, colour = MediaHoraria)) + geom_line()+ theme_black() + scale_color_gradientn(colours = cpt()) Pode revertir a escala de cores ggplot(df, aes(x = tempo, y = MediaHoraria, colour = MediaHoraria)) + geom_line()+ theme_black() + scale_color_gradientn(colours = rev(cpt())) + facet_wrap(~mes, scales = &quot;free&quot;) não gostou, tenta com a sorte ggplot(df, aes(x = tempo, y = MediaHoraria, colour = MediaHoraria)) + geom_line()+ theme_black() + facet_wrap(~mes, scales = &quot;free&quot;) + scale_color_gradientn(colours = lucky()) ## Colour gradient: bhw_bhw2_bhw2_03, number: 62 ggplot(df, aes(x = tempo, y = MediaHoraria, colour = MediaHoraria)) + geom_line()+ theme_black() + facet_wrap(~mes, scales = &quot;free&quot;) + scale_color_gradientn(colours = lucky()) ## Colour gradient: saga_saga_11, number: 6902 ggplot(df, aes(x = tempo, y = MediaHoraria, colour = MediaHoraria)) + geom_line()+ theme_black() + scale_color_gradientn(colours = lucky()) ## Colour gradient: nd_other_Neon_Orange, number: 5415 "],
["loop.html", "Capitulo 6 Estruturas de control 6.1 if-else 6.2 for 6.3 while 6.4 repeat 6.5 lapply 6.6 sapply 6.7 split 6.8 tapply 6.9 apply 6.10 mapply", " Capitulo 6 Estruturas de control 6.1 if-else 6.2 for 6.3 while 6.4 repeat 6.5 lapply 6.6 sapply 6.7 split 6.8 tapply 6.9 apply 6.10 mapply "],
["fx.html", "Capitulo 7 De scripts a funções e de funções a pacotes", " Capitulo 7 De scripts a funções e de funções a pacotes Coming soon "],
["geo.html", "Capitulo 8 Geo Spatial: raster, sf e stars", " Capitulo 8 Geo Spatial: raster, sf e stars Coming soon "],
["references.html", "References", " References "]
]
